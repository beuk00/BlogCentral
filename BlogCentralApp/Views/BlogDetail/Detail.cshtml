@model DetailIndexViewModel
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

<h1>@Model.blogPost.Title</h1>
<a asp-controller="" asp-action="" asp-route-id="@Model.blogPost.AuthorId">@Model.blogPost.Author.UserName</a>


<h5>@Model.blogPost.Date</h5>

<p>@Model.blogPost.Content</p>


@if (Model.hasLiked)
{
    <a asp-controller="BlogDetail" asp-action="Unlike" asp-route-id="@Model.blogPost.Id" class="btn btn-danger"> Unlike</a>
}
else
{
    <a asp-controller="BlogDetail" asp-action="Like" asp-route-id="@Model.blogPost.Id" class="btn btn-info"> Like</a>

}
<p style="float:left" class="badge badge-secondary">@Model.blogPost.Likes </p>
@foreach (var comment in Model.blogPost.Comments)
{
    <div>
        <p>@comment.Content</p>
        @if (UserManager.GetUserId(User) == Model.blogPost.AuthorId)
        {
            <a asp-controller="" asp-action="" asp-route-id="">Delete comment</a>
            <a asp-controller="" asp-action="" asp-route-id="" style="float:left">Edit comment</a>
        }
        @if (UserManager.GetUserId(User) == Model.blogPost.AuthorId)
        {
            <a asp-controller="" asp-action="" asp-route-id="">Delete comment</a>
        }
    </div>
}



@if (User.Identity.IsAuthenticated)
{
    <a asp-controller="" asp-action="" asp-route-id="">Create Comment</a>

}
else
{
    <div>Login to comment</div>
}
@if (UserManager.GetUserId(User) == Model.blogPost.AuthorId)
{
    <a asp-controller="" asp-action="" asp-route-id="">Delete post</a>
    <a asp-controller="" asp-action="" asp-route-id="" style="float:left">Edit post</a>
}